<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RB Bucks Wallet</title>
<style>
body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg,#ffb6c1,#ffd700); margin: 0; text-align: center; color: #333; }
h1 { margin: 30px 0 10px; font-size: 3rem; color: #ff1493; }
.balance { font-size: 2rem; margin: 20px 0; color: #fff; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); }
.container { background: white; padding: 20px; border-radius: 15px; display: inline-block; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 30px; min-width: 250px; }
input, select { padding: 8px; border-radius: 8px; border: 1px solid #ccc; font-size: 1rem; margin: 5px; }
button { background: #ff69b4; border: none; color: white; padding: 10px 20px; border-radius: 25px; cursor: pointer; margin: 10px; font-size: 1rem; }
button:hover { background: #ff1493; }
</style>
</head>
<body>

<h1>ðŸ’° RB Bucks Wallet</h1>
<div class="container">
  <p>User: <span id="username-display">Guest</span></p>
  <p>Balance: <span id="balance">0.00</span> RB Bucks</p>
</div>

<div class="container">
  <h2>Send RB Bucks</h2>
  <input type="text" id="send-to" placeholder="Recipient Username">
  <input type="number" id="send-amount" placeholder="Amount" min="1">
  <button onclick="sendRB()">Send</button>
</div>

<script>
// Initialize users and balances
let user = localStorage.getItem('rb_current_user') || 'Guest';
let users = JSON.parse(localStorage.getItem('rb_users') || '{}');

// Ensure default balances
if(!users[user]) users[user] = { balance: 100 };
if(!users['rb_owner']) users['rb_owner'] = { balance: 0 }; // earnings from shops
localStorage.setItem('rb_users', JSON.stringify(users));

function updateBalance(){
    users = JSON.parse(localStorage.getItem('rb_users') || '{}');
    
    // Automatically transfer shop earnings to your balance
    if(users['rb_owner'].balance > 0){
        users[user].balance += users['rb_owner'].balance;
        users['rb_owner'].balance = 0;
        localStorage.setItem('rb_users', JSON.stringify(users));
    }

    // Update display
    document.getElementById('username-display').textContent = user;
    document.getElementById('balance').textContent = (users[user].balance || 0).toFixed(2);
}

// Send RB Bucks to anyone
function sendRB(){
    const recipient = document.getElementById('send-to').value.trim();
    const amount = parseFloat(document.getElementById('send-amount').value);
    users = JSON.parse(localStorage.getItem('rb_users') || '{}');

    if(!recipient || !users[recipient]) { alert("Recipient not found."); return; }
    if(isNaN(amount) || amount <= 0) { alert("Enter a valid amount."); return; }
    if(users[user].balance < amount) { alert("Insufficient balance."); return; }

    users[user].balance -= amount;
    users[recipient].balance += amount;
    localStorage.setItem('rb_users', JSON.stringify(users));
    updateBalance();
    alert(`Sent ${amount.toFixed(2)} RB Bucks to ${recipient}`);
}

// Initialize and auto-refresh every 2 seconds
window.onload = updateBalance;
setInterval(updateBalance, 2000);
</script>

</body>
</html>
